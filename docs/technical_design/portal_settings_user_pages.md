# 系统设置与用户信息页面结构设计

适用范围：毕业设计项目管理平台门户（管理员/教师/学生）。
设计基调：遵循 `docs/technical_design/teacher_portal_design.md` 的专业、克制、高效风格。

---

## 1. 角色与权限

- 管理员 (Admin)：可见系统设置、全局项目管理、镜像仓库、资源监控。
- 教师 (Teacher)：可见本人项目、部署与学生信息；不可进入系统设置。
- 学生 (Student)：可见本人项目信息、提交记录、部署状态；仅自助信息维护。

## 2. 导航与入口

- 系统设置：仅管理员侧边栏可见（与“镜像仓库/资源监控”同一级）。
- 用户信息：顶部右侧用户头像/姓名下拉菜单进入。
- 学生端入口：独立登录入口或教师端“学生端入口”跳转（根据部署方式决定）。

---

# A. 系统设置（管理员）

结构建议：左侧二级导航 + 右侧内容区。主内容按“卡片块 + 表格区”的结构组织。

## A1. 系统总览（可选首页）

**目的**：快速查看系统级关键配置是否完整。

**结构**
- 系统概览卡片：平台名称、环境标识、门户域名、当前学期。
- 风险提示卡片：未配置项（如未配置镜像仓库/未设置 TLS）。
- 快捷入口：学期管理、项目模板、部署策略。

## A2. 基础配置

**卡片 1：平台与品牌**
- 平台名称（输入框）
- 门户标题（显示在浏览器标题）
- 平台 Logo（上传/替换）
- Favicon（上传）
- 环境标识（生产/测试/演示）

**卡片 2：访问与时间**
- 门户访问域名（只读或可编辑）
- 默认时区（下拉）
- 日期/时间格式（下拉）
- 默认语言（下拉）

**卡片 3：支持与联系**
- 管理员联系方式（邮箱/手机号）
- 帮助文档链接（URL）

**操作**
- 保存 / 重置
- 保存成功提示

## A3. 学期与班级管理

**卡片 1：学期列表**
- 列表字段：学期名称、起止日期、状态（进行中/已归档）、创建人、更新时间
- 操作：新增、编辑、归档、设为当前学期

**卡片 2：课程/班级列表**
- 字段：课程名、班级、授课教师、学生人数、当前学期
- 操作：新增、编辑、导入、导出

**导入弹窗**
- 模板下载按钮
- CSV 上传
- 字段映射预览
- 校验提示（重复学号/缺失字段）

## A4. 项目类型模板（gd/cd）

**表格：项目类型列表**
- 字段：类型编码、名称、命名空间、默认资源、域名后缀、状态
- 操作：编辑、启用/禁用

**详情/编辑抽屉结构**
- 基础信息：类型名称、编码、说明
- 命名空间：默认命名空间（如 `students-gd`）
- 资源配额：CPU、内存、存储（默认/最大）
- 运行策略：默认副本数、启动超时、健康检查
- 域名规则：二级域名规则、Ingress Class

## A5. 部署与集群策略

**卡片 1：部署策略**
- 部署超时（分钟）
- 失败重试次数
- 重部署策略（滚动/重建）
- 允许强制重部署（开关）

**卡片 2：命名空间映射**
- gd/cd 与 Namespace 映射表
- 资源限制模板（LimitRange/ResourceQuota 说明）

**卡片 3：Ingress / TLS**
- Ingress 域名后缀
- TLS 证书名称
- HTTP/HTTPS 强制策略

## A6. 镜像与仓库（入口指向管理员“镜像仓库”页）

**卡片 1：默认镜像仓库**
- 默认仓库名称/地址
- 认证方式（用户名/Token/无）

**卡片 2：镜像推荐策略**
- 推荐镜像标签（或默认 tag）
- 镜像检查策略（是否允许 latest）

## A7. 权限与审计

**卡片 1：角色配置**
- 角色：管理员、教师
- 权限范围（只读展示）

**卡片 2：审计日志**
- 日志保留天数
- 日志导出（CSV）
- 关键操作告警（开关）

---

# B. 用户信息（管理员/教师/学生）

结构建议：顶部个人信息概览 + Tab 分页（资料/安全/偏好/范围/统计）。

## B1. 顶部概览（通用）

- 头像（上传/更换）
- 姓名、角色标签
- 组织/学院、工号/学号
- 最近登录时间

## B2. 个人资料（通用）

**字段**
- 姓名（必填）
- 工号/学号（只读）
- 所属学院/专业
- 邮箱（必填）
- 手机号（可选）

**操作**
- 保存 / 重置

## B3. 账号与安全（通用）

**卡片 1：密码管理**
- 旧密码 / 新密码 / 确认新密码
- 强度提示

**卡片 2：二步验证**
- 开关、绑定说明

**卡片 3：登录设备**
- 设备名称、登录时间、IP
- 强制下线

## B4. 通知偏好（通用）

- 邮件通知（开关）
- 站内通知（开关）
- 失败部署提醒（开关）
- 免打扰时间（时间范围）

## B5. 权限与可见范围（管理员/教师）

**管理员**
- 角色说明（只读）
- 可见范围：全量项目、镜像仓库、资源监控

**教师**
- 角色说明（只读）
- 可见范围：本人项目、所属班级
- 授权班级列表（只读）

## B6. 我的课程/项目（教师）

**表格：课程/班级**
- 字段：课程名、班级、学生数、学期
- 操作：查看名单（跳转）

**统计卡片**
- 总项目数、运行中、异常、未部署

## B7. 我的项目（学生）

**卡片：项目信息**
- 学号、项目类型、指导教师
- Git 仓库地址
- 当前状态（运行/未部署/异常）

**卡片：部署信息**
- 当前镜像、最近部署时间
- 访问域名
- 重新部署（若允许）

**表格：部署历史**
- 版本、时间、结果、日志入口

## B8. 访问与偏好（可选）

- 默认首页（工作台/项目列表）
- 表格密度（紧凑/标准）
- 主题（沿用现有浅色风格）

---

# C. 学生端入口（最小功能结构）

**侧边导航**
- 我的项目
- 部署记录
- 帮助与反馈

**页面结构**
- 我的项目：项目信息卡 + 状态卡 + 快捷访问域名
- 部署记录：列表 + 状态徽章 + 日志查看
- 帮助与反馈：FAQ + 提交问题入口

---

# D. 交互与状态规范（共用）

- 表单校验：必填/格式错误/重复数据提示
- 空态设计：引导文字 + 操作按钮
- 错误态：明确错误原因 + 重试/联系管理员入口
- 关键操作二次确认：归档学期、禁用模板、强制下线

---

# E. 字段与表格清单（摘要）

- 学期：名称、起止日期、状态、创建人、更新时间
- 班级：课程名、班级名、教师、学生数、学期
- 项目模板：类型、命名空间、资源配额、域名规则
- 用户：姓名、角色、学院、联系方式、最近登录
- 部署：镜像、状态、时间、日志入口

*End*
